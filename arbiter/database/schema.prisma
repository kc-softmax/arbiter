generator client {
  provider             = "prisma-client-py"
  interface            = "asyncio"
  recursive_type_depth = "5"
}

datasource db {
  provider = "sqlite"
  url      = "file:database.db"
}

model User {
  id            Int      @id @default(autoincrement())
  email         String   @unique
  hash_tag      Int      @unique
  password      String
  access_token  String?
  refresh_token String?
  created_at    DateTime @default(now())
  updated_at    DateTime @updatedAt
}

model ServiceMeta {
  id                  Int           @id @default(autoincrement())
  name                String        @unique
  description         String?
  created_at          DateTime      @default(now())
  updated_at          DateTime      @updatedAt
  task_functions       TaskFunction[]
  registered_services Service[]
}

model TaskFunction {
  id              Int         @id @default(autoincrement())
  name            String      @unique
  description     String?
  created_at      DateTime    @default(now())
  updated_at      DateTime    @updatedAt
  service_meta_id Int
  service_meta    ServiceMeta @relation(fields: [service_meta_id], references: [id])
}

model Service {
  id              Int         @id @default(autoincrement())
  state           String      @default("active")
  created_at      DateTime    @default(now())
  updated_at      DateTime    @updatedAt
  service_meta_id Int
  service_meta    ServiceMeta @relation(fields: [service_meta_id], references: [id])
}
